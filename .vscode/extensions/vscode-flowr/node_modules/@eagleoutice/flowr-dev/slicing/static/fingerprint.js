"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.envFingerprint = envFingerprint;
exports.fingerprint = fingerprint;
const object_hash_1 = __importDefault(require("object-hash"));
const environment_1 = require("../../dataflow/environments/environment");
const built_in_1 = require("../../dataflow/environments/built-in");
function envFingerprint(env) {
    return (0, object_hash_1.default)(env, { excludeKeys: key => key === 'id', replacer: (v) => (v === environment_1.BuiltInEnvironment || v === built_in_1.EmptyBuiltInMemory) ? undefined : v });
}
function fingerprint(id, envFingerprint, onlyForSideEffects) {
    return `${id}-${envFingerprint}-${onlyForSideEffects ? '0' : '1'}`;
}
//# sourceMappingURL=fingerprint.js.map